plugins {
    id 'java'
    id 'application'
    id 'com.palantir.docker' version '0.25.0'
}

repositories {
    mavenCentral()
}

project.version = '0.1.1'
sourceCompatibility = JavaVersion.VERSION_11
targetCompatibility = JavaVersion.VERSION_11

dependencies {
    testImplementation 'junit:junit:4.13'
}

application {
    mainClassName = 'com.akotadakura.App'
}

tasks.withType(JavaCompile).all {
    options.encoding = "UTF-8"
}

jar {
    archiveFileName = "${project.name}.jar"
    manifest {
        attributes 'Main-Class' : 'com.akotadakura.App'
    }
}

docker {
    name "${project.name}:${project.version}"
    dockerfile file('Dockerfile')
    copySpec.from('build/libs').into('build/libs')
    noCache true
}
docker.dependsOn(build)